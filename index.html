<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-dark.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>Cron-last-sunday by xr09</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>Cron-last-sunday</h1>
          <h2>Run a cron task the first, nth or last weekday of the month</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/xr09/cron-last-sunday/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/xr09/cron-last-sunday/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/xr09/cron-last-sunday" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <h1>
<a id="cron-last-sunday" class="anchor" href="#cron-last-sunday" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>cron-last-sunday</h1>

<p>Cron Last Sunday is the solution for those picky admins that always wanted to run a task the third Thursday of the Month, or maybe the first Monday, whatever.</p>

<p>Read a short <a href="http://xr09.github.io/cron-scheduling-for-the-fancy.html">intro</a> at my blog.</p>

<h1>
<a id="install" class="anchor" href="#install" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Install</h1>

<p>Copy run-if-today to ~/bin for private use:</p>

<pre><code>cp -av run-if-today ~/bin/
</code></pre>

<p>Or /usr/local/bin/ for use by all system users:</p>

<pre><code>cp -av run-if-today /usr/local/bin/
</code></pre>

<h1>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Usage</h1>

<p>run-if-today accepts two parameters, nth-day and day-of-week:</p>

<p>run-if-today 1 Sat # Checks for the first Saturday of the month</p>

<p>run-if-today 3 Mon # 3rd Monday</p>

<p>Keep in mind the day of week must have 3 letters starting with a capital letter. Check "date +%a" for today.</p>

<p>Sun, Mon, Tue, Wed, Thu, Fri, Sat</p>

<p>Using this is rather simple, the script "run-if-today" evaluates its parameters and returns true or false 'a la bash' i.e. 0 or 1, then with the &amp;&amp; operator we use it to execute tasks with cron, like this:</p>

<pre><code>30 6 * * 6 root run-if-today 1 Sat &amp;&amp; /root/myfirstsaturdaybackup.sh
</code></pre>

<p>If run-if-today returns 1 (false in Bash) then the &amp;&amp; (and) will stop the operation and nothing happens.</p>

<p>You could use a * instead of 6 for the day of week, the script checks if it's Saturday and within the date range of the desired week, but in order to execute this code as little as possible it's recommended to fix a weekday so it runs at most 4 or 5 times a month.</p>

<p>Or you could possibly completely omit the second parameter and inherit it from cron since we are already specifying parameter. For example:</p>

<pre><code>30 6 * * 6 root run-if-today 1 &amp;&amp; /root/myfirstsaturdaybackup.sh
</code></pre>

<p>is equivalent to previous cronjob.</p>
        </section>

        <footer>
          Cron-last-sunday is maintained by <a href="https://github.com/xr09">xr09</a><br>
          This page was generated by <a href="https://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>

        
      </div>
    </div>
  </body>
</html>
